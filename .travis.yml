os: linux
dist: trusty
addons:
  apt:
    packages:
    - gfortran
    - libblas-dev
    - liblapack-dev
language: python
python:
  - "2.7"
before_install:
  - pushd $HOME && wget http://wannier.org/code/wannier90-2.0.1.tar.gz && tar zxvf wannier90-2.0.1.tar.gz && wannier90-2.0.1 && touch make.sys && F90=gfortran LIBS="-llapack -lblas" make && popd
install:
  - pip install -r requirements.txt
before_script:
  - pushd tests/_data/ && cp site.mk.example site.mk && make && popd
script:
  - py.test
branches:
  only:
  - master
